/**
 * OpenAI APIで使用するプロンプトテンプレート
 */

const prompts = {
  /**
   * 会議要約用プロンプト
   */
  summarizeMeeting: (agenda, goal, content) => {
    return `以下の会議の内容を見て、議事録を作って。

\`\`\`アジェンダ
${agenda}
\`\`\`

\`\`\`会議のゴール
${goal}
\`\`\`

\`\`\`会議の内容
${content}
\`\`\`
`;
  },

  /**
   * アクションアイテム抽出用プロンプト
   */
  extractActionItems: (agenda, goal, content) => {
    return `以下の会議の内容を見て、アクションアイテムの一覧をリストにして返して。

\`\`\`アジェンダ
${agenda}
\`\`\`

\`\`\`会議のゴール
${goal}
\`\`\`

\`\`\`会議の内容
${content}
\`\`\`
`;
  },

  /**
   * 争い検出・仲裁用プロンプト
   */
  detectDispute: (agenda, goal, content) => {
    return `以下の会議の内容を見て、争いが起きていないかを答えて。
また争いが起きていたら、仲裁する手順をJSON形式で教えて。

<入力>
\`\`\`アジェンダ
${agenda}
\`\`\`

\`\`\`会議のゴール
${goal}
\`\`\`

\`\`\`会議の内容
${content}
\`\`\`
`;
  },

  /**
   * 脱線検出用プロンプト
   */
  detectTangent: (agenda, goal, content) => {
    return `以下の会議の内容を見て、会議の内容がアジェンダ・ゴールに対して脇道に逸れていないか答えて。
脇道に逸れていたら、脇道に逸れないような問いを考えて
confidenceは、0〜100で答えて

<入力>
\`\`\`アジェンダ
${agenda}
\`\`\`

\`\`\`会議のゴール
${goal}
\`\`\`

\`\`\`会議の内容
${content}
\`\`\`

<出力>
\`\`\`json
{
  "confidence": 0,
  "content": "### 判定\\n\\n会議のアジェンダ・ゴール「森岡毅のマーケティングの議論」と、会議の内容を照らし合わせると――\\n\\n#### 内容について\\n- 「議論を数歩前に進めたことに意味がある」と述べられているが、森岡毅のどのマーケティング手法・理論について述べているかが具体的に不明です。\\n- 「世界初かどうかわからない」「数学的証明式に落とした事例は知らない」という発言が繰り返され、抽象的で何を議論しているのかが見えにくい状態です。\\n\\n#### ゴールとの整合性\\n- 森岡毅のマーケティングそのものに言及しているものの、「マーケティングの議論」とするには抽象的すぎて、中身が見えません。\\n- 現状では**話題が大枠では一致しているが、具体的なマーケティング理論や事例に踏み込めておらず、意味のある議論になっていない**可能性があります。\\n- 会議の目的に対し、議論が浅く、問題の本質や具体的内容に触れていないため、実質的には「脇道に逸れている」状態に近いです。\\n\\n---\\n\\n### 改善に向けた問い\\n\\n議論をアジェンダ・ゴールに沿わせ、「森岡毅のマーケティング」というテーマを深掘りするためには、以下のような問いを投げかけると良いでしょう。\\n\\n#### 具体化・主題への集中を促す問い\\n- 森岡毅さんが提唱した具体的なマーケティング理論や手法について、どのような点が革新的だと思いますか？\\n- 他のマーケターと比べて、森岡毅さん独自のアプローチにはどのような強みや特徴がありますか？\\n- 実際の企業で森岡毅さんのマーケティング理論がどのように応用され、どんな成果がありましたか？\\n- 数学的証明式に落としたという点について、それがどのようにマーケティングの実務や戦略に影響を与えたのか詳しく説明してもらえますか？\\n- 今後森岡毅さんのマーケティングが発展・応用されると、業界にはどんなインパクトがあると考えられるでしょうか？\\n\\n### 一言アドバイス\\n\\n発言に「具体的な内容」「事例」「意味合い」「他理論・他者との比較」などを求めると、議論がよりアジェンダ・ゴールに沿いやすくなります。"
}
\`\`\`
`;
  },

  /**
   * Mermaid図可視化用プロンプト
   */
  visualizeMermaid: (agenda, goal, content) => {
    return `以下の会議の内容を見て、会議の内容をマーメード図にして返して

\`\`\`アジェンダ
${agenda}
\`\`\`

\`\`\`会議のゴール
${goal}
\`\`\`

\`\`\`会議の内容
${content}
\`\`\`
`;
  },

  /**
   * アイスブレイク用プロンプト
   */
  generateIcebreaker: (date, anniversary) => {
    return `以下の日時・記念日を見て、いい感じのアイスブレイクを返して。
\`\`\`日時
${date}
\`\`\`

\`\`\`記念日
${anniversary}
\`\`\`
`;
  },
};

/**
 * システムメッセージの定義
 */
const systemMessages = {
  meetingExpert: "あなたは会議の進行に詳しいAIです。",
  icebreakerExpert: "あなたはアイスブレイクの達人です。",
};

module.exports = {
  prompts,
  systemMessages,
};
